<!doctype html>
<html>
<head>
	<meta charset="utf-8">
	<title>Trainbot stream config</title>
	<script>
		function streamClick(event) {
			const stream = event.target;

			const msg = {
				X: stream.naturalWidth * event.x / stream.width,
				Y: stream.naturalHeight * event.y / stream.height
			}

			fetch(new Request('/click'), {
					method: "POST",
					headers: {
						"Content-Type":"application/json",
					},
					body: JSON.stringify(msg)
			}).then().catch(function(error){
				console.log("request failed:", error)
			})
		}

		window.onload = function(){
			const stream = document.querySelector("#stream");
			stream.onclick = streamClick
		}
	</script>
</head>
<body>
	<h1>Videostream</h1>
    <img id="stream" src="stream.mjpeg" style="max-width: 100%; max-height: 80vh;" />
</body>
</html>
